var fBtn = document.querySelector(".feedback"), fPopup = document.querySelector(".modal-wrapper"), fBlock = document.querySelector(".modal-block"), fClose = fPopup.querySelector(".modal-button"), loginForm = fPopup.querySelector(".feedback-form"), fLogin = fPopup.querySelector(".login-icon-user"), fPassword = fPopup.querySelector(".login-icon-password"), isStorageSupport = !0, storage = ""; try { storage = localStorage.getItem("login") } catch (o) { isStorageSupport = !1 } fBtn.addEventListener("click", function (o) { o.preventDefault(), fPopup.classList.add("modal-show"), storage ? (fLogin.value = storage, fPassword.focus()) : fLogin.focus() }), fClose.addEventListener("click", function (o) { o.preventDefault(), fBlock.classList.remove("modal-error"), fPopup.classList.remove("modal-show") }), loginForm.addEventListener("submit", function (o) { fLogin.value && fPassword.value ? isStorageSupport && localStorage.setItem("login", fLogin.value) : (o.preventDefault(), fBlock.classList.remove("modal-error"), fPopup.offsetWidth, fBlock.classList.add("modal-error")) }), window.addEventListener("keydown", function (o) { 27 === o.keyCode && fPopup.classList.contains("modal-show") && (o.preventDefault(), fBlock.classList.remove("modal-error"), fPopup.classList.remove("modal-show")) });
